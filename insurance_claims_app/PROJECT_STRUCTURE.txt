INSURANCE CLAIMS PROCESSING - PROJECT STRUCTURE
================================================

insurance_claims_app/
â”‚
â”œâ”€â”€ ðŸ“„ Configuration & Setup
â”‚   â”œâ”€â”€ .env                          # Environment variables (Oracle creds, API keys)
â”‚   â”œâ”€â”€ .env.example                  # Environment template
â”‚   â”œâ”€â”€ config.py                     # Configuration loader
â”‚   â”œâ”€â”€ requirements.txt              # Python dependencies
â”‚   â””â”€â”€ setup_oracle_user.sql         # Oracle user setup script
â”‚
â”œâ”€â”€ ðŸ“š Documentation
â”‚   â”œâ”€â”€ README.md                     # Main documentation
â”‚   â”œâ”€â”€ QUICK_START.md                # Quick start guide
â”‚   â”œâ”€â”€ SETUP_INSTRUCTIONS.md         # Oracle setup instructions
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md            # Complete project summary
â”‚   â””â”€â”€ PROJECT_STRUCTURE.txt         # This file
â”‚
â”œâ”€â”€ ðŸ¤– Agents (LangGraph Multi-Agent System)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ state.py                      # State definition for workflow
â”‚   â”œâ”€â”€ validation_agent.py           # Agent 1: Claims validation
â”‚   â”œâ”€â”€ approval_agent.py             # Agent 2: Claims approval & payout
â”‚   â”œâ”€â”€ chatbot_agent.py              # Agent 3: RAG-powered chatbot
â”‚   â””â”€â”€ workflow.py                   # LangGraph workflow orchestration
â”‚
â”œâ”€â”€ ðŸ—„ï¸ Database (Oracle Integration)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py                     # Database schema & connection pool
â”‚   â””â”€â”€ crud.py                       # CRUD operations (Create/Read/Update)
â”‚
â”œâ”€â”€ ðŸ”Œ External APIs (Mock Implementations)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ car_damage_api.py             # Car damage detection (Arya.ai style)
â”‚   â”œâ”€â”€ fraud_scoring_api.py          # Fraud scoring (Fraud.ai style)
â”‚   â”œâ”€â”€ policy_management_api.py      # Policy management (Vertafore style)
â”‚   â”œâ”€â”€ payment_api.py                # Payment processing
â”‚   â””â”€â”€ document_api.py               # Document management for RAG
â”‚
â”œâ”€â”€ ðŸŒ API (FastAPI Backend)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py                       # REST API endpoints
â”‚
â”œâ”€â”€ ðŸ–¥ï¸ UI (Streamlit Frontend)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ streamlit_app.py              # Web interface (3 pages)
â”‚
â”œâ”€â”€ ðŸ§ª Tests
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_workflow.py              # Workflow test scenarios (6 tests)
â”‚   â”œâ”€â”€ test_db_connection.py         # Database connection test
â”‚   â””â”€â”€ test_complete_system.py       # End-to-end system test
â”‚
â”œâ”€â”€ ðŸš€ Run Scripts
â”‚   â”œâ”€â”€ run_api.py                    # Start FastAPI server
â”‚   â””â”€â”€ run_ui.py                     # Start Streamlit UI
â”‚
â””â”€â”€ ðŸ“¦ Virtual Environment
    â””â”€â”€ venv/                         # Python virtual environment


COMPONENT DETAILS
=================

1. AGENTS (agents/)
   â”œâ”€â”€ validation_agent.py (250 lines)
   â”‚   â”œâ”€â”€ Validates claim eligibility
   â”‚   â”œâ”€â”€ Checks: timeline, policy status, coverage, documents, estimate
   â”‚   â””â”€â”€ Returns: VALID/INVALID with detailed reasons
   â”‚
   â”œâ”€â”€ approval_agent.py (180 lines)
   â”‚   â”œâ”€â”€ Calls Car Damage API for assessment
   â”‚   â”œâ”€â”€ Calls Fraud Scoring API for risk analysis
   â”‚   â”œâ”€â”€ Makes approval decision based on fraud score
   â”‚   â”œâ”€â”€ Calculates payout: (damage - deductible) capped at limit
   â”‚   â””â”€â”€ Sets processing time: 2-10 days based on risk
   â”‚
   â”œâ”€â”€ chatbot_agent.py (280 lines)
   â”‚   â”œâ”€â”€ RAG-powered Q&A using ChromaDB
   â”‚   â”œâ”€â”€ OCI GenAI (Cohere Command-A model)
   â”‚   â”œâ”€â”€ Answers questions about coverage, deductibles, payouts
   â”‚   â””â”€â”€ Retrieves claim data for context
   â”‚
   â””â”€â”€ workflow.py (80 lines)
       â”œâ”€â”€ LangGraph workflow definition
       â”œâ”€â”€ Flow: Validation â†’ Approval â†’ END
       â””â”€â”€ State management between agents

2. DATABASE (database/)
   â”œâ”€â”€ models.py (180 lines)
   â”‚   â”œâ”€â”€ Oracle connection pooling
   â”‚   â”œâ”€â”€ Tables: claims, policies, chat_history
   â”‚   â”œâ”€â”€ Wallet support for Autonomous DB
   â”‚   â””â”€â”€ Sample policy seeding
   â”‚
   â””â”€â”€ crud.py (150 lines)
       â”œâ”€â”€ create_claim(), get_claim(), update_claim()
       â”œâ”€â”€ get_policy(), get_all_policies()
       â””â”€â”€ save_chat_message(), get_chat_history()

3. EXTERNAL APIs (external_apis/)
   â”œâ”€â”€ car_damage_api.py (100 lines)
   â”‚   â””â”€â”€ Mock Arya.ai - damage assessment & repair cost
   â”‚
   â”œâ”€â”€ fraud_scoring_api.py (120 lines)
   â”‚   â””â”€â”€ Mock Fraud.ai - fraud score (0-1) & risk indicators
   â”‚
   â”œâ”€â”€ policy_management_api.py (150 lines)
   â”‚   â””â”€â”€ Mock Vertafore - policy details & coverage check
   â”‚
   â”œâ”€â”€ payment_api.py (60 lines)
   â”‚   â””â”€â”€ Payment processing & status tracking
   â”‚
   â””â”€â”€ document_api.py (180 lines)
       â””â”€â”€ Policy documents for RAG (6 document types)

4. API (api/)
   â””â”€â”€ main.py (250 lines)
       â”œâ”€â”€ POST /submit-claim - Submit & process claim
       â”œâ”€â”€ GET /claim/{id} - Get claim status
       â”œâ”€â”€ GET /claims - List all claims
       â”œâ”€â”€ POST /chat - Chatbot interaction
       â”œâ”€â”€ GET /chat-history/{id} - Chat history
       â”œâ”€â”€ GET /policy/{id} - Policy details
       â”œâ”€â”€ GET /policies - List policies
       â””â”€â”€ GET /health - Health check

5. UI (ui/)
   â””â”€â”€ streamlit_app.py (450 lines)
       â”œâ”€â”€ Page 1: Submit Claim
       â”‚   â”œâ”€â”€ Form with policy, dates, damage amount
       â”‚   â”œâ”€â”€ Document upload
       â”‚   â””â”€â”€ Real-time results display
       â”‚
       â”œâ”€â”€ Page 2: Track Claim
       â”‚   â”œâ”€â”€ Search by claim ID
       â”‚   â”œâ”€â”€ Status display with color coding
       â”‚   â””â”€â”€ Financial details & validation results
       â”‚
       â””â”€â”€ Page 3: Chatbot
           â”œâ”€â”€ Chat interface with history
           â”œâ”€â”€ Quick question buttons
           â””â”€â”€ Source attribution

6. TESTS (tests/)
   â”œâ”€â”€ test_workflow.py (300 lines)
   â”‚   â”œâ”€â”€ Test 1: Valid claim (should approve)
   â”‚   â”œâ”€â”€ Test 2: Late filing (should deny)
   â”‚   â”œâ”€â”€ Test 3: Inactive policy (should deny)
   â”‚   â”œâ”€â”€ Test 4: Coverage mismatch (should deny)
   â”‚   â”œâ”€â”€ Test 5: Missing documents (should deny)
   â”‚   â””â”€â”€ Test 6: High value claim (may need review)
   â”‚
   â”œâ”€â”€ test_db_connection.py (60 lines)
   â”‚   â””â”€â”€ Tests Oracle connection & basic queries
   â”‚
   â””â”€â”€ test_complete_system.py (200 lines)
       â”œâ”€â”€ Tests all components end-to-end
       â”œâ”€â”€ Validates database, APIs, agents
       â””â”€â”€ Runs sample claim through workflow


DATABASE SCHEMA
===============

CLAIMS Table:
  - claim_id (PK)
  - policy_id, customer_id
  - incident_date, claim_date
  - claim_type (collision/comprehensive/liability)
  - damage_description, repair_shop
  - estimated_damage_amount
  - validation_status, validation_reason, validation_results
  - fraud_score, fraud_flags
  - approval_status, approval_reason
  - payout_amount, deductible
  - processing_time_days
  - damage_photos, incident_report, repair_estimate
  - created_at, updated_at

POLICIES Table:
  - policy_id (PK)
  - customer_id
  - coverage_type, coverage_limit, deductible
  - is_active
  - start_date, end_date
  - riders (JSON)
  - policy_document (BLOB)
  - created_at

CHAT_HISTORY Table:
  - chat_id (PK)
  - claim_id (FK)
  - customer_message, bot_response
  - timestamp


WORKFLOW LOGIC
==============

Validation Checks:
  âœ“ Claim filed within 30 days
  âœ“ Policy active on incident date
  âœ“ Claim type matches coverage
  âœ“ All documents submitted
  âœ“ Damage estimate reasonable

Approval Decision:
  â€¢ Fraud > 0.7 â†’ NEEDS_REVIEW
  â€¢ Fraud 0.4-0.7 â†’ APPROVED (monitored)
  â€¢ Fraud < 0.4 â†’ AUTO_APPROVED

Payout Calculation:
  payout = min(damage - deductible, coverage_limit)

Processing Time:
  â€¢ Fraud < 0.2 â†’ 2 days
  â€¢ Fraud < 0.5 â†’ 5 days
  â€¢ Fraud > 0.5 â†’ 10 days


DEPENDENCIES
============

Core:
  - langchain, langgraph, langchain-community
  - oci (Oracle Cloud Infrastructure SDK)
  - oracledb (Oracle Database driver)

Backend:
  - fastapi, uvicorn
  - pydantic

Frontend:
  - streamlit

AI/ML:
  - chromadb (vector store)
  - sentence-transformers (embeddings)

Utilities:
  - python-dotenv
  - httpx


SAMPLE DATA
===========

Policies:
  POL-001: Comprehensive, $50K limit, $500 deductible, Active
  POL-002: Collision, $30K limit, $1000 deductible, Active
  POL-003: Liability, $100K limit, $250 deductible, Inactive


RUNNING THE APPLICATION
========================

1. Fix Oracle Password:
   sqlplus sys/password@DSN as sysdba
   ALTER USER testuser IDENTIFIED BY Password123 ACCOUNT UNLOCK;

2. Test Database:
   ./venv/bin/python test_db_connection.py

3. Run System Test:
   ./venv/bin/python test_complete_system.py

4. Install Dependencies:
   ./venv/bin/pip install -r requirements.txt

5. Start API (Terminal 1):
   ./venv/bin/python run_api.py
   â†’ http://localhost:8000

6. Start UI (Terminal 2):
   ./venv/bin/python run_ui.py
   â†’ http://localhost:8501


PROJECT STATISTICS
==================

Total Files: 33
Python Files: 25
Documentation: 5
Configuration: 3

Lines of Code:
  - Agents: ~800 lines
  - Database: ~330 lines
  - External APIs: ~610 lines
  - API: ~250 lines
  - UI: ~450 lines
  - Tests: ~560 lines
  - Total: ~3,500+ lines

Features:
  - 3 AI Agents
  - 8 REST Endpoints
  - 3 Database Tables
  - 5 External API Integrations
  - 6 Test Scenarios
  - 3 UI Pages


STATUS: âœ… COMPLETE - Ready for testing after Oracle password reset
